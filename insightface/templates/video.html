<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Stream</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <script>
        // Hàm kết nối và hiển thị video stream
        function connectCamera() {
            const cameraId = document.getElementById("camera-id").value;
            if (cameraId) {
                const videoContainer = document.getElementById("video-container");

                // Tạo phần tử video mới
                const videoWrapper = document.createElement("div");
                videoWrapper.className = "video-wrapper";
                videoWrapper.id = `camera-${cameraId}`;

                videoWrapper.innerHTML = `
                    <h3>Camera ID: ${cameraId}</h3>
                    <video autoplay controls>
                        <source src="rtsp://192.168.1.142:8554/${cameraId}" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <button onclick="disconnectCamera('${cameraId}')">Disconnect</button>
                `;

                // Thêm video stream vào container
                videoContainer.appendChild(videoWrapper);
            } else {
                alert("Please enter a camera ID.");
            }
        }

        // Hàm ngắt kết nối camera
        function disconnectCamera(cameraId) {
            const videoWrapper = document.getElementById(`camera-${cameraId}`);
            if (videoWrapper) {
                videoWrapper.remove();
            } else {
                alert("Camera is not connected.");
            }
        }
    </script>
</head>
<body>
    <header>
        <h1>Video Stream</h1>
        <nav>
            <a href="/dashboard">Dashboard</a>
            <a href="/logout">Logout</a>
        </nav>
    </header>
    <main>
        <h2>Live Video</h2>
        <!-- Form nhập ID camera -->
        <div>
            <label for="camera-id">Camera ID:</label>
            <input type="text" id="camera-id" placeholder="Enter Camera ID">
            <button onclick="connectCamera()">Connect</button>
        </div>
        <!-- Container chứa video -->
        <div id="video-container" style="margin-top: 20px;">
            <!-- Video streams sẽ được thêm tại đây -->
        </div>
    </main>
</body>
</html>